<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>e.MAS 7 Prime - Hire Purchase Calculator</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function HPCalculator() {
            const [selectedModel, setSelectedModel] = useState('e7prime');
            
            const models = {
                'e7prime': {
                    name: 'e.MAS 7 Prime',
                    sellingPrice: 112392,
                    otrPrice: 112800,
                    welcomeBenefit: 4000
                },
                'e7premium': {
                    name: 'e.MAS 7 Premium',
                    sellingPrice: 126392,
                    otrPrice: 126800,
                    welcomeBenefit: 4000
                },
                'e5prime': {
                    name: 'e.MAS 5 Prime',
                    sellingPrice: 62392,
                    otrPrice: 62800,
                    welcomeBenefit: 3000
                },
                'e5premium': {
                    name: 'e.MAS 5 Premium',
                    sellingPrice: 75392,
                    otrPrice: 75800,
                    welcomeBenefit: 3000
                }
            };
            
            const currentModel = models[selectedModel];
            const OTR_PRICE = currentModel.otrPrice;
            const WELCOME_BENEFIT = currentModel.welcomeBenefit;
            const PRICE_AFTER_BENEFIT = OTR_PRICE - WELCOME_BENEFIT;
            
            const [downPaymentRM, setDownPaymentRM] = useState(10880);
            const [downPaymentPercent, setDownPaymentPercent] = useState(10);
            const [tenure, setTenure] = useState(7);
            const [interestRate, setInterestRate] = useState(2.5);
            
            const [loanAmount, setLoanAmount] = useState(0);
            const [monthlyPayment, setMonthlyPayment] = useState(0);
            const [totalInterest, setTotalInterest] = useState(0);

            useEffect(() => {
                const vehiclePrice = PRICE_AFTER_BENEFIT;
                const loan = vehiclePrice - downPaymentRM;
                setLoanAmount(loan);
                
                const totalInterestAmount = loan * (interestRate / 100) * tenure;
                const totalAmount = loan + totalInterestAmount;
                const monthly = totalAmount / (tenure * 12);
                
                setTotalInterest(totalInterestAmount);
                setMonthlyPayment(monthly);
            }, [downPaymentRM, tenure, interestRate]);

            const handleRMChange = (value) => {
                const rm = parseFloat(value) || 0;
                const validRM = Math.min(Math.max(rm, 0), PRICE_AFTER_BENEFIT);
                setDownPaymentRM(validRM);
                setDownPaymentPercent(((validRM / PRICE_AFTER_BENEFIT) * 100).toFixed(2));
            };

            const handlePercentChange = (value) => {
                const percent = parseFloat(value) || 0;
                const validPercent = Math.min(Math.max(percent, 0), 100);
                setDownPaymentPercent(validPercent);
                setDownPaymentRM(((PRICE_AFTER_BENEFIT * validPercent) / 100).toFixed(2));
            };

            return (
                <div className="min-h-screen" style={{ backgroundColor: '#b8e4e8' }}>
                    
                    <div className="max-w-4xl mx-auto px-6 pb-6 pt-6">
                        {/* Model Tabs */}
                        <div className="bg-white bg-opacity-90 backdrop-blur-sm rounded-lg shadow-lg p-2 mb-6">
                            <div className="grid grid-cols-4 gap-2">
                                <button
                                    onClick={() => setSelectedModel('e7prime')}
                                    className={`py-3 px-2 rounded-lg font-semibold text-sm transition-all ${
                                        selectedModel === 'e7prime'
                                            ? 'bg-indigo-600 text-white shadow-md'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    e.MAS 7<br/>Prime
                                </button>
                                <button
                                    onClick={() => setSelectedModel('e7premium')}
                                    className={`py-3 px-2 rounded-lg font-semibold text-sm transition-all ${
                                        selectedModel === 'e7premium'
                                            ? 'bg-indigo-600 text-white shadow-md'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    e.MAS 7<br/>Premium
                                </button>
                                <button
                                    onClick={() => setSelectedModel('e5prime')}
                                    className={`py-3 px-2 rounded-lg font-semibold text-sm transition-all ${
                                        selectedModel === 'e5prime'
                                            ? 'bg-indigo-600 text-white shadow-md'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    e.MAS 5<br/>Prime
                                </button>
                                <button
                                    onClick={() => setSelectedModel('e5premium')}
                                    className={`py-3 px-2 rounded-lg font-semibold text-sm transition-all ${
                                        selectedModel === 'e5premium'
                                            ? 'bg-indigo-600 text-white shadow-md'
                                            : 'bg-gray-100 text-gray-700 hover:bg-gray-200'
                                    }`}
                                >
                                    e.MAS 5<br/>Premium
                                </button>
                            </div>
                        </div>
                        <div className="bg-white bg-opacity-80 backdrop-blur-sm rounded-lg shadow-lg p-6 mb-6">
                            <h2 className="text-xl font-bold text-gray-800 mb-4">Proton {currentModel.name}</h2>
                            <div className="grid grid-cols-2 gap-4 text-sm">
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">Selling Price:</span>
                                    <span className="font-semibold float-right">RM {currentModel.sellingPrice.toLocaleString()}</span>
                                </div>
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">1-Year Road Tax:</span>
                                    <span className="font-semibold float-right text-green-600">Exempted</span>
                                </div>
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">Registration Fee:</span>
                                    <span className="font-semibold float-right">RM 60</span>
                                </div>
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">HP Endorsement:</span>
                                    <span className="font-semibold float-right">RM 50</span>
                                </div>
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">EV Number Plate:</span>
                                    <span className="font-semibold float-right">RM 98</span>
                                </div>
                                <div className="border-b pb-2">
                                    <span className="text-gray-600">Inspection Fees (B2):</span>
                                    <span className="font-semibold float-right">RM 200</span>
                                </div>
                            </div>
                            <div className="mt-4 pt-4 border-t-2 border-indigo-600">
                                <div className="flex justify-between items-center">
                                    <span className="text-lg font-bold text-gray-800">On-The-Road Price:</span>
                                    <span className="text-2xl font-bold text-indigo-600">RM {OTR_PRICE.toLocaleString()}</span>
                                </div>
                            </div>
                            <div className="mt-3 pt-3 border-t bg-green-50 -mx-6 -mb-6 px-6 py-4 rounded-b-lg">
                                <div className="flex justify-between items-center">
                                    <span className="text-lg font-bold text-green-700">After Welcome Benefit (RM {WELCOME_BENEFIT.toLocaleString()})*:</span>
                                    <span className="text-2xl font-bold text-green-600">RM {PRICE_AFTER_BENEFIT.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white bg-opacity-80 backdrop-blur-sm rounded-lg shadow-lg p-6 mb-6">
                            <div className="mb-6">
                                <label className="block text-lg font-bold text-gray-800 mb-3">Down Payment</label>
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-xs text-gray-600 mb-2">Amount (RM)</label>
                                        <input
                                            type="number"
                                            value={downPaymentRM}
                                            onChange={(e) => handleRMChange(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 text-lg font-semibold"
                                            min="0"
                                            step="100"
                                        />
                                    </div>
                                    <div>
                                        <label className="block text-xs text-gray-600 mb-2">Percentage (%)</label>
                                        <input
                                            type="number"
                                            value={downPaymentPercent}
                                            onChange={(e) => handlePercentChange(e.target.value)}
                                            className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 text-lg font-semibold"
                                            min="0"
                                            max="100"
                                            step="0.1"
                                        />
                                    </div>
                                </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Loan Tenure (Years)</label>
                                    <input
                                        type="number"
                                        value={tenure}
                                        onChange={(e) => setTenure(parseFloat(e.target.value) || 1)}
                                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 text-lg font-semibold"
                                        min="1"
                                        max="9"
                                        step="1"
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">Interest Rate (% p.a.)</label>
                                    <input
                                        type="number"
                                        value={interestRate}
                                        onChange={(e) => setInterestRate(parseFloat(e.target.value) || 0)}
                                        className="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500 text-lg font-semibold"
                                        min="0"
                                        max="15"
                                        step="0.1"
                                    />
                                </div>
                            </div>
                        </div>

                        <div className="bg-white bg-opacity-80 backdrop-blur-sm rounded-lg shadow-lg p-6">
                            <h2 className="text-xl font-bold text-gray-800 mb-6">Payment Summary</h2>
                            
                            <div className="space-y-3">
                                <div className="flex justify-between items-center p-4 bg-gray-50 rounded-lg border border-gray-200">
                                    <span className="text-gray-700 font-semibold">Loan Amount</span>
                                    <span className="text-xl font-bold text-gray-800">
                                        RM {loanAmount.toLocaleString('en-MY', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                    </span>
                                </div>
                                
                                <div className="flex justify-between items-center p-5 bg-indigo-50 rounded-lg border-2 border-indigo-300">
                                    <div>
                                        <div className="text-indigo-700 font-semibold text-lg">Monthly Payment</div>
                                        <div className="text-xs text-indigo-600 mt-1">for {tenure} {tenure === 1 ? 'year' : 'years'} ({tenure * 12} months)</div>
                                    </div>
                                    <span className="text-3xl font-bold text-indigo-600">
                                        RM {monthlyPayment.toLocaleString('en-MY', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                    </span>
                                </div>

                                <div className="grid grid-cols-2 gap-3 pt-2">
                                    <div className="text-center p-4 bg-blue-50 rounded-lg border border-blue-200">
                                        <div className="text-sm text-gray-600 mb-1">Total Interest</div>
                                        <div className="text-xl font-bold text-blue-600">
                                            RM {totalInterest.toLocaleString('en-MY', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                        </div>
                                    </div>
                                    <div className="text-center p-4 bg-purple-50 rounded-lg border border-purple-200">
                                        <div className="text-sm text-gray-600 mb-1">Total Repayment</div>
                                        <div className="text-xl font-bold text-purple-600">
                                            RM {(loanAmount + totalInterest).toLocaleString('en-MY', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div className="mt-6 pt-6 border-t border-gray-200">
                                <p className="text-xs text-gray-500 font-mono bg-gray-50 p-3 rounded">
                                    Formula: Monthly Payment = (Loan Amount + Total Interest) / (Tenure × 12)<br/>
                                    Where: Total Interest = Loan Amount × Interest Rate × Tenure
                                </p>
                            </div>
                        </div>

                        <div className="mt-6 text-center text-sm text-gray-600">
                            <p>*Terms and conditions apply. Please consult with your dealer for actual rates and promotions.</p>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<HPCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
